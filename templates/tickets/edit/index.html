{% extends "../../base.html" %}

{% block navbar %}
{% include "navbar.html" %}
{% endblock navbar %}

{% block content %}
<div class="container">
  <div class="columns">
    <div class="column is-8-widescreen is-offset-2-widescreen">
      <div class="box">

        {% include "../../components/flash_message.html" %}

        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label">Medium</label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                <div class="select is-fullwidth">
                  <select disabled>
                    <option selected>{{ ticket.ticket.type_.german() }}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label">Kurs</label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                <div class="select is-fullwidth">
                  <select disabled>
                    <option selected>{{ ticket.course_name }}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label">Kategorie</label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                <div class="select is-fullwidth">
                  <select disabled>
                    <option selected>{{ ticket.ticket.category.german() }}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>

        {% match ticket.medium %}
          {% when Medium::Text with { ticket_id, page, line } %}
            {% include "text.html" %}
          {% when Medium::Recording with { ticket_id, time } %}
            {% include "recording.html" %}
          {% when Medium::Interactive with { ticket_id, url } %}
            {% include "interactive.html" %}
          {% when Medium::Questionaire with { ticket_id, question, answer } %}
            {% include "questionaire.html" %}
        {% endmatch %}

        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label">Titel</label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                <input class="input" type="text" value="{{ ticket.ticket.title }}" disabled>
              </div>
            </div>
          </div>
        </div>

        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label">Beschreibung</label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                <textarea class="textarea" rows="5" disabled>{{ ticket.ticket.description|escape|linebreaksbr|safe }}</textarea>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="columns">
    <div class="column is-8-widescreen is-offset-2-widescreen">
      <div class="box">

        {% for c in ticket.comments %}
        <div class="content">
          <p>
            <strong>{{ c.creator_name }}</strong> <small>{{ c.comment.timestamp|timestamp }}</small>
            <br>
            {{ c.comment.message|escape|linebreaksbr|safe }}
          </p>
        </div>
        {% endfor %}

        <form action="/tickets/{{ ticket.ticket.id }}/comment" method="POST">
          <div class="field">
            <label class="label">Kommentar</label>
            <div class="control">
              <textarea class="textarea" name="comment"></textarea>
            </div>
          </div>
          <div class="control">
            <button class="button is-info">
              <span class="icon">
                <i class="far fa-comments"></i>
              </span>
              <span>Senden</span>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock content %}