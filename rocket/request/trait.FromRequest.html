<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Trait implemented by request guards to derive a value from incoming requests."><meta name="keywords" content="rust, rustlang, rust-lang, FromRequest"><title>FromRequest in rocket::request - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="shortcut icon" href="https://rocket.rs/v0.4/images/favicon.ico"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../rocket/index.html"><div class="logo-container"><img src="https://rocket.rs/v0.4/images/logo-boxed.png" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../rocket/index.html"><div class="logo-container">
                    <img src="https://rocket.rs/v0.4/images/logo-boxed.png" alt="logo"></div>
        </a><h2 class="location"><a href="#">FromRequest</a></h2><div class="sidebar-elems"><section><div class="block"><h3 class="sidebar-title"><a href="#associated-types">Associated Types</a></h3><ul><li><a href="#associatedtype.Error">Error</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#required-methods">Required Methods</a></h3><ul><li><a href="#tymethod.from_request">from_request</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#foreign-impls">Implementations on Foreign Types</a></h3><ul><li><a href="#impl-FromRequest%3C%27a%2C%20%27r%3E-for-Option%3CT%3E">Option&lt;T&gt;</a></li><li><a href="#impl-FromRequest%3C%27a%2C%20%27r%3E-for-Result%3CT%2C%20T%3A%3AError%3E">Result&lt;T, T::Error&gt;</a></li><li><a href="#impl-FromRequest%3C%27a%2C%20%27r%3E-for-SocketAddr">SocketAddr</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div></section><h2 class="location"><a href="index.html">In rocket::request</a></h2><div id="sidebar-vars" data-name="FromRequest" data-ty="trait" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../rocket/index.html">
                        <img src="https://rocket.rs/v0.4/images/logo-boxed.png" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Trait <a href="../index.html">rocket</a>::<wbr><a href="index.html">request</a>::<wbr><a class="trait" href="#">FromRequest</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/rocket/request/from_request.rs.html#347-358">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust trait"><code>pub trait FromRequest&lt;'a, 'r&gt;: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> {
    type <a href="#associatedtype.Error" class="associatedtype">Error</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>;
    fn <a href="#tymethod.from_request" class="fnname">from_request</a>(request: &amp;'a <a class="struct" href="struct.Request.html" title="struct rocket::request::Request">Request</a>&lt;'r&gt;) -&gt; <a class="type" href="type.Outcome.html" title="type rocket::request::Outcome">Outcome</a>&lt;Self, Self::<a class="associatedtype" href="trait.FromRequest.html#associatedtype.Error" title="type rocket::request::FromRequest::Error">Error</a>&gt;;
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Trait implemented by request guards to derive a value from incoming
requests.</p>
<h2 id="request-guards"><a href="#request-guards">Request Guards</a></h2>
<p>A request guard is a type that represents an arbitrary validation policy.
The validation policy is implemented through <code>FromRequest</code>. In other words,
every type that implements <code>FromRequest</code> is a request guard.</p>
<p>Request guards appear as inputs to handlers. An arbitrary number of request
guards can appear as arguments in a route handler. Rocket will automatically
invoke the <code>FromRequest</code> implementation for request guards before calling
the handler. Rocket only dispatches requests to a handler when all of its
guards pass.</p>
<h3 id="example"><a href="#example">Example</a></h3>
<p>The following dummy handler makes use of three request guards, <code>A</code>, <code>B</code>, and
<code>C</code>. An input type can be identified as a request guard if it is not named
in the route attribute. This is why, for instance, <code>param</code> is not a request
guard.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">get</span>(<span class="string">&quot;/&lt;param&gt;&quot;</span>)]</span>
<span class="kw">fn</span> <span class="ident">index</span>(<span class="ident">param</span>: <span class="ident">isize</span>, <span class="ident">a</span>: <span class="ident">A</span>, <span class="ident">b</span>: <span class="ident">B</span>, <span class="ident">c</span>: <span class="ident">C</span>) -&gt; <span class="ident">T</span> { <span class="comment">/* ... */</span> }</code></pre></div>
<p>Request guards always fire in left-to-right declaration order. In the
example above, the order is <code>a</code> followed by <code>b</code> followed by <code>c</code>. Failure is
short-circuiting; if one guard fails, the remaining are not attempted.</p>
<h2 id="outcomes"><a href="#outcomes">Outcomes</a></h2>
<p>The returned <a href="type.Outcome.html" title="Outcome"><code>Outcome</code></a> of a <code>from_request</code> call determines how the
incoming request will be processed.</p>
<ul>
<li>
<p><strong>Success</strong>(S)</p>
<p>If the <code>Outcome</code> is <a href="../enum.Outcome.html#variant.Success" title="Success"><code>Success</code></a>, then the <code>Success</code> value will be used as
the value for the corresponding parameter.  As long as all other guards
succeed, the request will be handled.</p>
</li>
<li>
<p><strong>Failure</strong>(Status, E)</p>
<p>If the <code>Outcome</code> is <a href="../enum.Outcome.html#variant.Failure" title="Failure"><code>Failure</code></a>, the request will fail with the given
status code and error. The designated error <a href="../struct.Catcher.html"><code>Catcher</code></a> will be
used to respond to the request. Note that users can request types of
<code>Result&lt;S, E&gt;</code> and <code>Option&lt;S&gt;</code> to catch <code>Failure</code>s and retrieve the error
value.</p>
</li>
<li>
<p><strong>Forward</strong></p>
<p>If the <code>Outcome</code> is <a href="../enum.Outcome.html#variant.Forward" title="Forward"><code>Forward</code></a>, the request will be forwarded to the next
matching request. Note that users can request an <code>Option&lt;S&gt;</code> to catch
<code>Forward</code>s.</p>
</li>
</ul>
<h2 id="provided-implementations"><a href="#provided-implementations">Provided Implementations</a></h2>
<p>Rocket implements <code>FromRequest</code> for several built-in types. Their behavior
is documented here.</p>
<ul>
<li>
<p><strong>Method</strong></p>
<p>Extracts the <a href="../http/enum.Method.html" title="Method"><code>Method</code></a> from the incoming request.</p>
<p><em>This implementation always returns successfully.</em></p>
</li>
<li>
<p><strong>&amp;Origin</strong></p>
<p>Extracts the <a href="../http/uri/struct.Origin.html" title="Origin"><code>Origin</code></a> URI from the incoming request.</p>
<p><em>This implementation always returns successfully.</em></p>
</li>
<li>
<p><strong>&amp;Route</strong></p>
<p>Extracts the <a href="../struct.Route.html" title="Route"><code>Route</code></a> from the request if one is available. If a route
is not available, the request is forwarded.</p>
<p>For information on when an <code>&amp;Route</code> is available, see
<a href="struct.Request.html#method.route" title="Request::route()"><code>Request::route()</code></a>.</p>
</li>
<li>
<p><strong>Cookies</strong></p>
<p>Returns a borrow to the <a href="../http/enum.Cookies.html" title="Cookies"><code>Cookies</code></a> in the incoming request. Note that
<code>Cookies</code> implements internal mutability, so a handle to <code>Cookies</code>
allows you to get <em>and</em> set cookies in the request.</p>
<p><em>This implementation always returns successfully.</em></p>
</li>
<li>
<p><strong>ContentType</strong></p>
<p>Extracts the <a href="../http/struct.ContentType.html" title="ContentType"><code>ContentType</code></a> from the incoming request. If the request
didn’t specify a Content-Type, the request is forwarded.</p>
</li>
<li>
<p><strong>SocketAddr</strong></p>
<p>Extracts the remote address of the incoming request as a <a href="https://doc.rust-lang.org/nightly/std/net/addr/enum.SocketAddr.html" title="SocketAddr"><code>SocketAddr</code></a>.
If the remote address is not known, the request is forwarded.</p>
<p><em>This implementation always returns successfully.</em></p>
</li>
<li>
<p><strong>Option&lt;T&gt;</strong> <em>where</em> <strong>T: FromRequest</strong></p>
<p>The type <code>T</code> is derived from the incoming request using <code>T</code>’s
<code>FromRequest</code> implementation. If the derivation is a <code>Success</code>, the
derived value is returned in <code>Some</code>. Otherwise, a <code>None</code> is returned.</p>
<p><em>This implementation always returns successfully.</em></p>
</li>
<li>
<p><strong>Result&lt;T, T::Error&gt;</strong> <em>where</em> <strong>T: FromRequest</strong></p>
<p>The type <code>T</code> is derived from the incoming request using <code>T</code>’s
<code>FromRequest</code> implementation. If derivation is a <code>Success</code>, the value is
returned in <code>Ok</code>. If the derivation is a <code>Failure</code>, the error value is
returned in <code>Err</code>. If the derivation is a <code>Forward</code>, the request is
forwarded.</p>
</li>
</ul>
<h2 id="example-1"><a href="#example-1">Example</a></h2>
<p>Imagine you’re running an authenticated API service that requires that some
requests be sent along with a valid API key in a header field. You want to
ensure that the handlers corresponding to these requests don’t get called
unless there is an API key in the request and the key is valid. The
following example implements this using an <code>ApiKey</code> type and a <code>FromRequest</code>
implementation for that type. The <code>ApiKey</code> type is then used in the
<code>sensitive</code> handler.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rocket::Outcome</span>;
<span class="kw">use</span> <span class="ident">rocket::http::Status</span>;
<span class="kw">use</span> <span class="ident">rocket::request</span>::{<span class="self">self</span>, <span class="ident">Request</span>, <span class="ident">FromRequest</span>};

<span class="kw">struct</span> <span class="ident">ApiKey</span>(<span class="ident">String</span>);

<span class="doccomment">/// Returns true if `key` is a valid API key string.</span>
<span class="kw">fn</span> <span class="ident">is_valid</span>(<span class="ident">key</span>: <span class="kw-2">&amp;</span><span class="ident">str</span>) -&gt; <span class="ident">bool</span> {
    <span class="ident">key</span> <span class="op">==</span> <span class="string">&quot;valid_api_key&quot;</span>
}

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>)]</span>
<span class="kw">enum</span> <span class="ident">ApiKeyError</span> {
    <span class="ident">BadCount</span>,
    <span class="ident">Missing</span>,
    <span class="ident">Invalid</span>,
}

<span class="kw">impl</span><span class="op">&lt;</span><span class="lifetime">&#39;a</span>, <span class="lifetime">&#39;r</span><span class="op">&gt;</span> <span class="ident">FromRequest</span><span class="op">&lt;</span><span class="lifetime">&#39;a</span>, <span class="lifetime">&#39;r</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">ApiKey</span> {
    <span class="kw">type</span> <span class="ident">Error</span> <span class="op">=</span> <span class="ident">ApiKeyError</span>;

    <span class="kw">fn</span> <span class="ident">from_request</span>(<span class="ident">request</span>: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a</span> <span class="ident">Request</span><span class="op">&lt;</span><span class="lifetime">&#39;r</span><span class="op">&gt;</span>) -&gt; <span class="ident">request::Outcome</span><span class="op">&lt;</span><span class="self">Self</span>, <span class="ident"><span class="self">Self</span>::Error</span><span class="op">&gt;</span> {
        <span class="kw">let</span> <span class="ident">keys</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="kw">_</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">request</span>.<span class="ident">headers</span>().<span class="ident">get</span>(<span class="string">&quot;x-api-key&quot;</span>).<span class="ident">collect</span>();
        <span class="kw">match</span> <span class="ident">keys</span>.<span class="ident">len</span>() {
            <span class="number">0</span> =&gt; <span class="ident">Outcome::Failure</span>((<span class="ident">Status::BadRequest</span>, <span class="ident">ApiKeyError::Missing</span>)),
            <span class="number">1</span> <span class="kw">if</span> <span class="ident">is_valid</span>(<span class="ident">keys</span>[<span class="number">0</span>]) =&gt; <span class="ident">Outcome::Success</span>(<span class="ident">ApiKey</span>(<span class="ident">keys</span>[<span class="number">0</span>].<span class="ident">to_string</span>())),
            <span class="number">1</span> =&gt; <span class="ident">Outcome::Failure</span>((<span class="ident">Status::BadRequest</span>, <span class="ident">ApiKeyError::Invalid</span>)),
            <span class="kw">_</span> =&gt; <span class="ident">Outcome::Failure</span>((<span class="ident">Status::BadRequest</span>, <span class="ident">ApiKeyError::BadCount</span>)),
        }
    }
}

<span class="attribute">#[<span class="ident">get</span>(<span class="string">&quot;/sensitive&quot;</span>)]</span>
<span class="kw">fn</span> <span class="ident">sensitive</span>(<span class="ident">key</span>: <span class="ident">ApiKey</span>) -&gt; <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> {
    <span class="string">&quot;Sensitive data.&quot;</span>
}
</code></pre></div>
<h2 id="request-local-state"><a href="#request-local-state">Request-Local State</a></h2>
<p>Request guards that perform expensive operations, such as those that query a
database or an external service, should use the <a href="https://rocket.rs/v0.4/guide/state/#request-local-state">request-local state</a> cache
to store results if they might be invoked multiple times during the routing
of a single request.</p>
<p>For example, consider a pair of <code>User</code> and <code>Admin</code> guards and a pair of
routes (<code>admin_dashboard</code> and <code>user_dashboard</code>):</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">impl</span><span class="op">&lt;</span><span class="lifetime">&#39;a</span>, <span class="lifetime">&#39;r</span><span class="op">&gt;</span> <span class="ident">FromRequest</span><span class="op">&lt;</span><span class="lifetime">&#39;a</span>, <span class="lifetime">&#39;r</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">User</span> {
    <span class="kw">type</span> <span class="ident">Error</span> <span class="op">=</span> ();

    <span class="kw">fn</span> <span class="ident">from_request</span>(<span class="ident">request</span>: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a</span> <span class="ident">Request</span><span class="op">&lt;</span><span class="lifetime">&#39;r</span><span class="op">&gt;</span>) -&gt; <span class="ident">request::Outcome</span><span class="op">&lt;</span><span class="ident">User</span>, ()<span class="op">&gt;</span> {
        <span class="kw">let</span> <span class="ident">db</span> <span class="op">=</span> <span class="ident">request</span>.<span class="ident">guard</span>::<span class="op">&lt;</span><span class="ident">Database</span><span class="op">&gt;</span>()<span class="question-mark">?</span>;
        <span class="ident">request</span>.<span class="ident">cookies</span>()
            .<span class="ident">get_private</span>(<span class="string">&quot;user_id&quot;</span>)
            .<span class="ident">and_then</span>(<span class="op">|</span><span class="ident">cookie</span><span class="op">|</span> <span class="ident">cookie</span>.<span class="ident">value</span>().<span class="ident">parse</span>().<span class="ident">ok</span>())
            .<span class="ident">and_then</span>(<span class="op">|</span><span class="ident">id</span><span class="op">|</span> <span class="ident">db</span>.<span class="ident">get_user</span>(<span class="ident">id</span>).<span class="ident">ok</span>())
            .<span class="ident">or_forward</span>(())
    }
}

<span class="kw">impl</span><span class="op">&lt;</span><span class="lifetime">&#39;a</span>, <span class="lifetime">&#39;r</span><span class="op">&gt;</span> <span class="ident">FromRequest</span><span class="op">&lt;</span><span class="lifetime">&#39;a</span>, <span class="lifetime">&#39;r</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">Admin</span> {
    <span class="kw">type</span> <span class="ident">Error</span> <span class="op">=</span> ();

    <span class="kw">fn</span> <span class="ident">from_request</span>(<span class="ident">request</span>: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a</span> <span class="ident">Request</span><span class="op">&lt;</span><span class="lifetime">&#39;r</span><span class="op">&gt;</span>) -&gt; <span class="ident">request::Outcome</span><span class="op">&lt;</span><span class="ident">Admin</span>, ()<span class="op">&gt;</span> {
        <span class="comment">// This will unconditionally query the database!</span>
        <span class="kw">let</span> <span class="ident">user</span> <span class="op">=</span> <span class="ident">request</span>.<span class="ident">guard</span>::<span class="op">&lt;</span><span class="ident">User</span><span class="op">&gt;</span>()<span class="question-mark">?</span>;

        <span class="kw">if</span> <span class="ident">user</span>.<span class="ident">is_admin</span> {
            <span class="ident">Outcome::Success</span>(<span class="ident">Admin</span> { <span class="ident">user</span> })
        } <span class="kw">else</span> {
            <span class="ident">Outcome::Forward</span>(())
        }
    }
}

<span class="attribute">#[<span class="ident">get</span>(<span class="string">&quot;/dashboard&quot;</span>)]</span>
<span class="kw">fn</span> <span class="ident">admin_dashboard</span>(<span class="ident">admin</span>: <span class="ident">Admin</span>) { }

<span class="attribute">#[<span class="ident">get</span>(<span class="string">&quot;/dashboard&quot;</span>, <span class="ident">rank</span> <span class="op">=</span> <span class="number">2</span>)]</span>
<span class="kw">fn</span> <span class="ident">user_dashboard</span>(<span class="ident">user</span>: <span class="ident">User</span>) { }</code></pre></div>
<p>When a non-admin user is logged in, the database will be queried twice: once
via the <code>Admin</code> guard invoking the <code>User</code> guard, and a second time via the
<code>User</code> guard directly. For cases like these, request-local state should be
used, as illustrated below:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">impl</span><span class="op">&lt;</span><span class="lifetime">&#39;a</span>, <span class="lifetime">&#39;r</span><span class="op">&gt;</span> <span class="ident">FromRequest</span><span class="op">&lt;</span><span class="lifetime">&#39;a</span>, <span class="lifetime">&#39;r</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;a</span> <span class="ident">User</span> {
    <span class="kw">type</span> <span class="ident">Error</span> <span class="op">=</span> <span class="op">!</span>;

    <span class="kw">fn</span> <span class="ident">from_request</span>(<span class="ident">request</span>: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a</span> <span class="ident">Request</span><span class="op">&lt;</span><span class="lifetime">&#39;r</span><span class="op">&gt;</span>) -&gt; <span class="ident">request::Outcome</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="lifetime">&#39;a</span> <span class="ident">User</span>, <span class="op">!</span><span class="op">&gt;</span> {
        <span class="comment">// This closure will execute at most once per request, regardless of</span>
        <span class="comment">// the number of times the `User` guard is executed.</span>
        <span class="kw">let</span> <span class="ident">user_result</span> <span class="op">=</span> <span class="ident">request</span>.<span class="ident">local_cache</span>(<span class="op">|</span><span class="op">|</span> {
            <span class="kw">let</span> <span class="ident">db</span> <span class="op">=</span> <span class="ident">request</span>.<span class="ident">guard</span>::<span class="op">&lt;</span><span class="ident">Database</span><span class="op">&gt;</span>().<span class="ident">succeeded</span>()<span class="question-mark">?</span>;
            <span class="ident">request</span>.<span class="ident">cookies</span>()
                .<span class="ident">get_private</span>(<span class="string">&quot;user_id&quot;</span>)
                .<span class="ident">and_then</span>(<span class="op">|</span><span class="ident">cookie</span><span class="op">|</span> <span class="ident">cookie</span>.<span class="ident">value</span>().<span class="ident">parse</span>().<span class="ident">ok</span>())
                .<span class="ident">and_then</span>(<span class="op">|</span><span class="ident">id</span><span class="op">|</span> <span class="ident">db</span>.<span class="ident">get_user</span>(<span class="ident">id</span>).<span class="ident">ok</span>())
        });

        <span class="ident">user_result</span>.<span class="ident">as_ref</span>().<span class="ident">or_forward</span>(())
    }
}

<span class="kw">impl</span><span class="op">&lt;</span><span class="lifetime">&#39;a</span>, <span class="lifetime">&#39;r</span><span class="op">&gt;</span> <span class="ident">FromRequest</span><span class="op">&lt;</span><span class="lifetime">&#39;a</span>, <span class="lifetime">&#39;r</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">Admin</span><span class="op">&lt;</span><span class="lifetime">&#39;a</span><span class="op">&gt;</span> {
    <span class="kw">type</span> <span class="ident">Error</span> <span class="op">=</span> <span class="op">!</span>;

    <span class="kw">fn</span> <span class="ident">from_request</span>(<span class="ident">request</span>: <span class="kw-2">&amp;</span><span class="lifetime">&#39;a</span> <span class="ident">Request</span><span class="op">&lt;</span><span class="lifetime">&#39;r</span><span class="op">&gt;</span>) -&gt; <span class="ident">request::Outcome</span><span class="op">&lt;</span><span class="ident">Admin</span><span class="op">&lt;</span><span class="lifetime">&#39;a</span><span class="op">&gt;</span>, <span class="op">!</span><span class="op">&gt;</span> {
        <span class="kw">let</span> <span class="ident">user</span> <span class="op">=</span> <span class="ident">request</span>.<span class="ident">guard</span>::<span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="ident">User</span><span class="op">&gt;</span>()<span class="question-mark">?</span>;

        <span class="kw">if</span> <span class="ident">user</span>.<span class="ident">is_admin</span> {
            <span class="ident">Outcome::Success</span>(<span class="ident">Admin</span> { <span class="ident">user</span> })
        } <span class="kw">else</span> {
            <span class="ident">Outcome::Forward</span>(())
        }
    }
}</code></pre></div>
<p>Notice that these request guards provide access to <em>borrowed</em> data (<code>&amp;'a User</code> and <code>Admin&lt;'a&gt;</code>) as the data is now owned by the request’s cache.</p>
</div></details><h2 id="associated-types" class="small-section-header">Associated Types<a href="#associated-types" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="associatedtype.Error" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/rocket/request/from_request.rs.html#349">source</a></div><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a></h4></div></summary><div class="docblock"><p>The associated error to be returned if derivation fails.</p>
</div></details></div><h2 id="required-methods" class="small-section-header">Required methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="tymethod.from_request" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/rocket/request/from_request.rs.html#357">source</a></div><h4 class="code-header">fn <a href="#tymethod.from_request" class="fnname">from_request</a>(request: &amp;'a <a class="struct" href="struct.Request.html" title="struct rocket::request::Request">Request</a>&lt;'r&gt;) -&gt; <a class="type" href="type.Outcome.html" title="type rocket::request::Outcome">Outcome</a>&lt;Self, Self::<a class="associatedtype" href="trait.FromRequest.html#associatedtype.Error" title="type rocket::request::FromRequest::Error">Error</a>&gt;</h4></div></summary><div class="docblock"><p>Derives an instance of <code>Self</code> from the incoming request metadata.</p>
<p>If the derivation is successful, an outcome of <code>Success</code> is returned. If
the derivation fails in an unrecoverable fashion, <code>Failure</code> is returned.
<code>Forward</code> is returned to indicate that the request should be forwarded
to other matching routes, if any.</p>
</div></details></div><h2 id="foreign-impls" class="small-section-header">Implementations on Foreign Types<a href="#foreign-impls" class="anchor"></a></h2><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-FromRequest%3C%27a%2C%20%27r%3E-for-SocketAddr" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/rocket/request/from_request.rs.html#417-426">source</a></span><a href="#impl-FromRequest%3C%27a%2C%20%27r%3E-for-SocketAddr" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'r&gt; <a class="trait" href="trait.FromRequest.html" title="trait rocket::request::FromRequest">FromRequest</a>&lt;'a, 'r&gt; for <a class="enum" href="https://doc.rust-lang.org/nightly/std/net/addr/enum.SocketAddr.html" title="enum std::net::addr::SocketAddr">SocketAddr</a></h3></section></summary><div class="impl-items"><section id="associatedtype.Error-1" class="type trait-impl has-srclink"><a href="#associatedtype.Error-1" class="anchor"></a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.never.html">!</a></h4></section><section id="method.from_request" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/rocket/request/from_request.rs.html#420-425">source</a></span><a href="#method.from_request" class="anchor"></a><h4 class="code-header">fn <a href="#tymethod.from_request" class="fnname">from_request</a>(request: &amp;'a <a class="struct" href="struct.Request.html" title="struct rocket::request::Request">Request</a>&lt;'r&gt;) -&gt; <a class="type" href="type.Outcome.html" title="type rocket::request::Outcome">Outcome</a>&lt;Self, Self::<a class="associatedtype" href="trait.FromRequest.html#associatedtype.Error" title="type rocket::request::FromRequest::Error">Error</a>&gt;</h4></section></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-FromRequest%3C%27a%2C%20%27r%3E-for-Result%3CT%2C%20T%3A%3AError%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/rocket/request/from_request.rs.html#428-438">source</a></span><a href="#impl-FromRequest%3C%27a%2C%20%27r%3E-for-Result%3CT%2C%20T%3A%3AError%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'r, T:&nbsp;<a class="trait" href="trait.FromRequest.html" title="trait rocket::request::FromRequest">FromRequest</a>&lt;'a, 'r&gt;&gt; <a class="trait" href="trait.FromRequest.html" title="trait rocket::request::FromRequest">FromRequest</a>&lt;'a, 'r&gt; for <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, T::<a class="associatedtype" href="trait.FromRequest.html#associatedtype.Error" title="type rocket::request::FromRequest::Error">Error</a>&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.Error-2" class="type trait-impl has-srclink"><a href="#associatedtype.Error-2" class="anchor"></a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.never.html">!</a></h4></section><section id="method.from_request-1" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/rocket/request/from_request.rs.html#431-437">source</a></span><a href="#method.from_request-1" class="anchor"></a><h4 class="code-header">fn <a href="#tymethod.from_request" class="fnname">from_request</a>(request: &amp;'a <a class="struct" href="struct.Request.html" title="struct rocket::request::Request">Request</a>&lt;'r&gt;) -&gt; <a class="type" href="type.Outcome.html" title="type rocket::request::Outcome">Outcome</a>&lt;Self, Self::<a class="associatedtype" href="trait.FromRequest.html#associatedtype.Error" title="type rocket::request::FromRequest::Error">Error</a>&gt;</h4></section></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-FromRequest%3C%27a%2C%20%27r%3E-for-Option%3CT%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/rocket/request/from_request.rs.html#440-449">source</a></span><a href="#impl-FromRequest%3C%27a%2C%20%27r%3E-for-Option%3CT%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'r, T:&nbsp;<a class="trait" href="trait.FromRequest.html" title="trait rocket::request::FromRequest">FromRequest</a>&lt;'a, 'r&gt;&gt; <a class="trait" href="trait.FromRequest.html" title="trait rocket::request::FromRequest">FromRequest</a>&lt;'a, 'r&gt; for <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.Error-3" class="type trait-impl has-srclink"><a href="#associatedtype.Error-3" class="anchor"></a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.never.html">!</a></h4></section><section id="method.from_request-2" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/rocket/request/from_request.rs.html#443-448">source</a></span><a href="#method.from_request-2" class="anchor"></a><h4 class="code-header">fn <a href="#tymethod.from_request" class="fnname">from_request</a>(request: &amp;'a <a class="struct" href="struct.Request.html" title="struct rocket::request::Request">Request</a>&lt;'r&gt;) -&gt; <a class="type" href="type.Outcome.html" title="type rocket::request::Outcome">Outcome</a>&lt;Self, Self::<a class="associatedtype" href="trait.FromRequest.html#associatedtype.Error" title="type rocket::request::FromRequest::Error">Error</a>&gt;</h4></section></div></details><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-FromRequest%3C%27a%2C%20%27r%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/rocket/request/from_request.rs.html#395-404">source</a></span><a href="#impl-FromRequest%3C%27a%2C%20%27r%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'r&gt; <a class="trait" href="trait.FromRequest.html" title="trait rocket::request::FromRequest">FromRequest</a>&lt;'a, 'r&gt; for &amp;'a <a class="struct" href="../http/struct.Accept.html" title="struct rocket::http::Accept">Accept</a></h3></section></summary><div class="impl-items"><section id="associatedtype.Error-4" class="type trait-impl has-srclink"><a href="#associatedtype.Error-4" class="anchor"></a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.never.html">!</a></h4></section></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-FromRequest%3C%27a%2C%20%27r%3E-1" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/rocket/request/from_request.rs.html#406-415">source</a></span><a href="#impl-FromRequest%3C%27a%2C%20%27r%3E-1" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'r&gt; <a class="trait" href="trait.FromRequest.html" title="trait rocket::request::FromRequest">FromRequest</a>&lt;'a, 'r&gt; for &amp;'a <a class="struct" href="../http/struct.ContentType.html" title="struct rocket::http::ContentType">ContentType</a></h3></section></summary><div class="impl-items"><section id="associatedtype.Error-5" class="type trait-impl has-srclink"><a href="#associatedtype.Error-5" class="anchor"></a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.never.html">!</a></h4></section></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-FromRequest%3C%27a%2C%20%27r%3E-2" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/rocket/request/from_request.rs.html#368-374">source</a></span><a href="#impl-FromRequest%3C%27a%2C%20%27r%3E-2" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'r&gt; <a class="trait" href="trait.FromRequest.html" title="trait rocket::request::FromRequest">FromRequest</a>&lt;'a, 'r&gt; for &amp;'a <a class="struct" href="../http/uri/struct.Origin.html" title="struct rocket::http::uri::Origin">Origin</a>&lt;'a&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.Error-6" class="type trait-impl has-srclink"><a href="#associatedtype.Error-6" class="anchor"></a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.never.html">!</a></h4></section></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-FromRequest%3C%27a%2C%20%27r%3E-3" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/rocket/request/from_request.rs.html#376-385">source</a></span><a href="#impl-FromRequest%3C%27a%2C%20%27r%3E-3" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'r&gt; <a class="trait" href="trait.FromRequest.html" title="trait rocket::request::FromRequest">FromRequest</a>&lt;'a, 'r&gt; for &amp;'r <a class="struct" href="../struct.Route.html" title="struct rocket::Route">Route</a></h3></section></summary><div class="impl-items"><section id="associatedtype.Error-7" class="type trait-impl has-srclink"><a href="#associatedtype.Error-7" class="anchor"></a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.never.html">!</a></h4></section></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-FromRequest%3C%27a%2C%20%27r%3E-4" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/rocket/request/from_request.rs.html#387-393">source</a></span><a href="#impl-FromRequest%3C%27a%2C%20%27r%3E-4" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'r&gt; <a class="trait" href="trait.FromRequest.html" title="trait rocket::request::FromRequest">FromRequest</a>&lt;'a, 'r&gt; for <a class="enum" href="../http/enum.Cookies.html" title="enum rocket::http::Cookies">Cookies</a>&lt;'a&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.Error-8" class="type trait-impl has-srclink"><a href="#associatedtype.Error-8" class="anchor"></a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.never.html">!</a></h4></section></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-FromRequest%3C%27a%2C%20%27r%3E-5" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/rocket/request/from_request.rs.html#360-366">source</a></span><a href="#impl-FromRequest%3C%27a%2C%20%27r%3E-5" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'r&gt; <a class="trait" href="trait.FromRequest.html" title="trait rocket::request::FromRequest">FromRequest</a>&lt;'a, 'r&gt; for <a class="enum" href="../http/enum.Method.html" title="enum rocket::http::Method">Method</a></h3></section></summary><div class="impl-items"><section id="associatedtype.Error-9" class="type trait-impl has-srclink"><a href="#associatedtype.Error-9" class="anchor"></a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.never.html">!</a></h4></section></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-FromRequest%3C%27a%2C%20%27r%3E-6" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/rocket/response/flash.rs.html#248-269">source</a></span><a href="#impl-FromRequest%3C%27a%2C%20%27r%3E-6" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'r&gt; <a class="trait" href="trait.FromRequest.html" title="trait rocket::request::FromRequest">FromRequest</a>&lt;'a, 'r&gt; for <a class="struct" href="../response/struct.Flash.html" title="struct rocket::response::Flash">Flash</a>&lt;&amp;'a <a class="struct" href="struct.Request.html" title="struct rocket::request::Request">Request</a>&lt;'r&gt;&gt;</h3></section></summary><div class="docblock"><p>Retrieves a flash message from a flash cookie. If there is no flash cookie,
or if the flash cookie is malformed, an empty <code>Err</code> is returned.</p>
<p>The suggested use is through an <code>Option</code> and the <code>FlashMessage</code> type alias
in <code>request</code>: <code>Option&lt;FlashMessage&gt;</code>.</p>
</div><div class="impl-items"><section id="associatedtype.Error-10" class="type trait-impl has-srclink"><a href="#associatedtype.Error-10" class="anchor"></a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a></h4></section></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-FromRequest%3C%27a%2C%20%27r%3E-7" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/rocket/request/state.rs.html#168-181">source</a></span><a href="#impl-FromRequest%3C%27a%2C%20%27r%3E-7" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'r, T:&nbsp;<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static&gt; <a class="trait" href="trait.FromRequest.html" title="trait rocket::request::FromRequest">FromRequest</a>&lt;'a, 'r&gt; for <a class="struct" href="struct.State.html" title="struct rocket::request::State">State</a>&lt;'r, T&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.Error-11" class="type trait-impl has-srclink"><a href="#associatedtype.Error-11" class="anchor"></a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a></h4></section></div></details></div><script type="text/javascript" src="../../implementors/rocket/request/trait.FromRequest.js" async></script></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="rocket" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.61.0-nightly (4ce374923 2022-02-28)" ></div>
</body></html>